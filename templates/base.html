<!DOCTYPE html>
{% load static %}

<html {% if LANGUAGE_CODE %}lang="{{ LANGUAGE_CODE }}"{% endif %} data-bs-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>
        {% block title %}
            Music Library
        {% endblock %}
    </title>

    {% comment %}
    Using local Bootstrap CSS from static files.
    This improves offline availability and loading speed.
    Uncomment the CDN link below if you prefer online loading.
    {% endcomment %}

    {# Bootstrap CSS from CDN for online use #}
    {# <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"> #}

    <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}">

    {# Custom CSS overrides for project specific styles #}
    <link rel="stylesheet" href="{% static 'css/custom-overrides.css' %}">

    {# Global link for spinning search under the magnifier button #}
    <link rel="stylesheet" href="{% static 'css/spinning-search-button.css' %}">


    <style>
        /* Reset margin and padding on html and body */
        html, body {
            margin: 0; /* Remove default margin */
            padding: 0; /* Remove default padding */
            overflow-x: hidden; /* Prevent horizontal scrollbars caused by overflow */
        }
    </style>

    {# Block for additional head elements that can be extended in child templates #}
    {% block extra_head %}{% endblock %}

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

</head>

<body>
{# Include SVG sprites for reusable icons or inline SVGs to improve performance #}
{% include 'sprites.html' %}

{# Include site-wide navigation bar for consistent header across pages #}
{% include 'navbar.html' %}

{# Main container for page content with vertical margin using Bootstrap spacing #}
<main>
    {% block content %}{% endblock %}
</main>

{# Include site footer to appear on every page #}
{% include 'footer.html' %}

{% comment %}
    Using local Bootstrap JS bundle including Popper.js for tooltips, popovers, etc.
    Uncomment CDN version if online loading is preferred.
    {% endcomment %}

<script src="{% static 'bootstrap/js/bootstrap.bundle.min.js' %}"></script>
{# <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script> #}
<script src="https://unpkg.com/htmx.org@1.9.10"></script>

{# Include login modal so it's available on all pages #}
{% include 'includes/login_modal.html' %}

{#<script>#}
{# Closes dropdown when clicked outside #}
{#document.addEventListener('click', function (event) {#}
{#    const searchForm = document.querySelector('form[autocomplete="off"]');#}
{#    const dropdown = document.getElementById('search-results');#}
{#    if (!searchForm.contains(event.target)) {#}
{#        dropdown.innerHTML = '';#}
{#    }#}
{#});#}
{#</script>#}

<script>
{# Start rotating wheel animation + also by clicking pc enter btn #}
function spinIcon() {
    const icon = document.getElementById('search-icon');
    icon.classList.add('spin');
    setTimeout(() => icon.classList.remove('spin'), 1500);
}

document.getElementById('search-btn').addEventListener('click', function(e) {
    e.preventDefault(); // Zabráníme okamžitému odeslání
    spinIcon();
    setTimeout(() => {
        this.form.submit();
    }, 500); // čekáme 1.5s, aby animace doběhla
});


document.querySelector('input[name="q"]').addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
        e.preventDefault();  // Zabráníme okamžitému odeslání
        spinIcon();
        // Počkej 1.5 s (doba animace) a pak odešli formulář
        setTimeout(() => {
            this.form.submit();
        }, 500);
    }
});
</script>

</body>

</html>
