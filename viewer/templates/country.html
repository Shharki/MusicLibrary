{% extends 'base.html' %}

{% block title %}
    {{ country }}
{% endblock %}

{% block content %}
    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="col-md-12">

                <!-- Main page heading displaying the country name -->
                {% include "includes/headers/page_heading_with_buttons.html" with title=country.name update_url="country_update" update_kwargs=country.pk update_label="country" delete_url="country_delete" delete_kwargs=country.pk delete_label="country" %}



                <!-- Responsive layout: two cards side-by-side on md+, stacked on small screens -->
                <div class="row row-cols-1 row-cols-md-2 g-4 mt-4">

                    <!-- Contributors section -->
                    <div class="col">
                        <div class="bg-body-secondary rounded p-3 shadow-sm h-100">
                            <h5 class="text-center">Contributors</h5>

                            <div class="list-group list-group-item-action">
                                {% for contributor in country.contributors.all %}
                                    <div class="list-group-item d-flex justify-content-between align-items-center">
                                        <a href="{% url 'contributor' contributor.pk %}"
                                           class="text-decoration-none text-body fw-semibold">
                                            {{ contributor }}
                                        </a>
                                        <div class="btn-group btn-group-sm" role="group">
                                            <a href="{% url 'contributor_update' contributor.pk %}"
                                               class="btn btn-outline-warning" title="Edit">
                                                ✏️
                                            </a>
                                            <a href="{% url 'contributor_delete' contributor.pk %}"
                                               class="btn btn-outline-danger" title="Delete">
                                                ❌
                                            </a>
                                        </div>
                                    </div>
                                {% empty %}
                                    <div class="list-group-item text-muted text-center">
                                        There are no contributors for this country.
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>

                    <!-- Music groups section -->
                    <div class="col">
                        <div class="bg-body-secondary rounded p-3 shadow-sm h-100">
                            <h5 class="text-center">Music Groups</h5>

                            <div class="list-group list-group-item-action">
                                {% for group in country.music_groups.all %}
                                    <div class="list-group-item d-flex justify-content-between align-items-center">
                                        <a href="{% url 'music_group' group.pk %}"
                                           class="text-decoration-none text-body fw-semibold">
                                            {{ group }}
                                        </a>
                                        <div class="btn-group btn-group-sm" role="group">
                                            <a href="{% url 'music_group_update' group.pk %}"
                                               class="btn btn-outline-warning" title="Edit">
                                                ✏️
                                            </a>
                                            <a href="{% url 'music_group_delete' group.pk %}"
                                               class="btn btn-outline-danger" title="Delete">
                                                ❌
                                            </a>
                                        </div>
                                    </div>
                                {% empty %}
                                    <div class="list-group-item text-muted text-center">
                                        There are no music groups for this country.
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
{% endblock %}
