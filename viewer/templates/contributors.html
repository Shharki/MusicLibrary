{% extends 'base.html' %}

{% block title %}Contributors{% endblock %}

{% block content %}
<div class="container-fluid my-5">
    <div class="row justify-content-center">
        <div class="col-11 col-md-11 col-lg-9 col-xl-8 col-xxl-8">

            <!-- Heading -->
            {% include "includes/headers/page_heading_with_buttons.html" with title="Contributors" create_url="contributor_create" create_label="contributor" %}

            <!-- Paginate per column selector form -->
            <div class="d-flex justify-content-between align-items-center flex-wrap mb-3">
                <form method="get" class="d-flex align-items-center mb-3">
                    <label for="paginate_per_column" class="me-2">Show per column:</label>
                    <select name="paginate_per_column" id="paginate_per_column" class="form-select form-select-sm w-auto me-3" onchange="this.form.submit()">
                        {% for option in pagination_options %}
                            <option value="{{ option }}" {% if option == paginate_per_column %}selected{% endif %}>{{ option }}</option>
                        {% endfor %}
                    </select>
                    {% for key, value in request.GET.items %}
                        {% if key != 'paginate_per_column' %}
                            <input type="hidden" name="{{ key }}" value="{{ value }}">
                        {% endif %}
                    {% endfor %}
                </form>
            </div>

            <!-- Alphabet filter -->
            {% include "includes/alphabet_filter.html" with alphabet=alphabet current_letter=request.GET.letter request_get=request.GET %}

            <!-- Contributors categories grid -->
            <div class="bg-body-secondary rounded p-3 shadow-sm">
                <div class="row row-cols-1 row-cols-md-2 row-cols-lg-2 row-cols-xl-2 row-cols-xxl-3 g-3">

                    {% include "includes/contributor_category_column.html" with title="Performers" contributors=performers page_obj=performers_page_obj page_param="page_performer" letter=request.GET.letter %}
                    {% include "includes/contributor_category_column.html" with title="Producers" contributors=producers page_obj=producers_page_obj page_param="page_producer" letter=request.GET.letter %}
                    {% include "includes/contributor_category_column.html" with title="Writers" contributors=writers page_obj=writers_page_obj page_param="page_writer" letter=request.GET.letter %}
                    {% include "includes/contributor_category_column.html" with title="Publishers" contributors=publishers page_obj=publishers_page_obj page_param="page_publisher" letter=request.GET.letter %}
                    {% include "includes/contributor_category_column.html" with title="Others" contributors=others page_obj=others_page_obj page_param="page_other" letter=request.GET.letter %}
                    {% include "includes/contributor_category_column.html" with title="Without role" contributors=without_role page_obj=without_role_page_obj page_param="page_without_role" letter=request.GET.letter %}

                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}
